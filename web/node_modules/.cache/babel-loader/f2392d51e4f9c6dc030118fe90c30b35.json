{"ast":null,"code":"import { useStore } from 'vuex';\nimport { ref } from 'vue';\nimport router from '@/router';\nexport default {\n  components: {},\n\n  setup() {\n    const store = useStore();\n    let username = ref('');\n    let password = ref('');\n    let error_message = ref('');\n    const jwt_token = localStorage.getItem(\"jwt_token\");\n    console.log(jwt_token);\n\n    if (jwt_token) {\n      store.commit(\"updateToken\", jwt_token);\n      store.dispatch(\"getinfo\", {\n        success() {\n          router.push({\n            name: \"home\"\n          });\n          store.commit(\"updatePullingInfo\", false);\n        },\n\n        error() {\n          store.commit(\"updatePullingInfo\", false);\n        }\n\n      });\n    } else {\n      store.commit(\"updatePullingInfo\", false);\n    }\n\n    const login = () => {\n      store.dispatch(\"login\", {\n        username: username.value,\n        password: password.value,\n\n        success() {\n          store.dispatch(\"getinfo\", {\n            success() {\n              console.log(\"login sussess\");\n              router.push({\n                name: \"home\"\n              }); //登陆成功跳转到home页面\n            },\n\n            error() {}\n\n          });\n        },\n\n        error() {\n          error_message.value = '用户名或密码错误';\n        }\n\n      });\n    };\n\n    return {\n      username,\n      password,\n      error_message,\n      login\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAwBA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,eAAe;EACXC,UAAU,EAAE,EADD;;EAKXC,KAAK,GAAG;IAEJ,MAAMC,KAAI,GAAIL,QAAQ,EAAtB;IACA,IAAIM,QAAO,GAAIL,GAAG,CAAC,EAAD,CAAlB;IACA,IAAIM,QAAO,GAAIN,GAAG,CAAC,EAAD,CAAlB;IACA,IAAIO,aAAY,GAAIP,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMQ,SAAQ,GAAIC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAlB;IACAC,OAAO,CAACC,GAAR,CAAYJ,SAAZ;;IACA,IAAIA,SAAJ,EAAe;MACXJ,KAAK,CAACS,MAAN,CAAa,aAAb,EAA4BL,SAA5B;MACAJ,KAAK,CAACU,QAAN,CAAe,SAAf,EAA0B;QACtBC,OAAO,GAAG;UACNd,MAAM,CAACe,IAAP,CAAY;YAAEC,IAAI,EAAE;UAAR,CAAZ;UACAb,KAAK,CAACS,MAAN,CAAa,mBAAb,EAAkC,KAAlC;QACH,CAJqB;;QAKtBK,KAAK,GAAG;UACJd,KAAK,CAACS,MAAN,CAAa,mBAAb,EAAkC,KAAlC;QACJ;;MAPsB,CAA1B;IAUJ,CAZA,MAYO;MACHT,KAAK,CAACS,MAAN,CAAa,mBAAb,EAAkC,KAAlC;IACJ;;IAGA,MAAMM,KAAI,GAAI,MAAM;MAChBf,KAAK,CAACU,QAAN,CAAe,OAAf,EAAwB;QACpBT,QAAQ,EAAEA,QAAQ,CAACe,KADC;QAEpBd,QAAQ,EAAEA,QAAQ,CAACc,KAFC;;QAGpBL,OAAO,GAAG;UACNX,KAAK,CAACU,QAAN,CAAe,SAAf,EAA0B;YACtBC,OAAO,GAAG;cACNJ,OAAO,CAACC,GAAR,CAAY,eAAZ;cACAX,MAAM,CAACe,IAAP,CAAY;gBAAEC,IAAI,EAAE;cAAR,CAAZ,EAFM,CAEwB;YAEjC,CALqB;;YAMtBC,KAAK,GAAG,CAER;;UARsB,CAA1B;QAWH,CAfmB;;QAgBpBA,KAAK,GAAG;UACJX,aAAa,CAACa,KAAd,GAAsB,UAAtB;QACH;;MAlBmB,CAAxB;IAoBJ,CArBA;;IAuBA,OAAO;MACHf,QADG;MAEHC,QAFG;MAGHC,aAHG;MAIHY;IAJG,CAAP;EAYJ;;AAjEW,CAAf","names":["useStore","ref","router","components","setup","store","username","password","error_message","jwt_token","localStorage","getItem","console","log","commit","dispatch","success","push","name","error","login","value"],"sourceRoot":"","sources":["D:\\MyAllCoding\\SmartCycling\\web\\src\\views\\user\\account\\UserAccountLoginView.vue"],"sourcesContent":["<template>\r\n\r\n\r\n    <div class=\"a\" v-if=\"!$store.state.user.pulling_info\">\r\n        <div class=\"b\"></div>\r\n        <div class=\"c\">\r\n            <div class=\"d\">\r\n                <form @submit.prevent=\"login\">\r\n                    <h1>Login</h1>\r\n                    <input v-model=\"username\" type=\"text\" class=\"e\" placeholder=\"USERNAME\">\r\n                    <input v-model=\"password\" type=\"password\" class=\"e\" placeholder=\"PASSWORD\">\r\n                    <a href=\"#\" class=\"f\">忘记密码</a>\r\n                    <div class=\"error-message\">{{ error_message }}</div>\r\n                    <button class=\"g\" type=\"submit\">登陆</button>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { useStore } from 'vuex'\r\nimport { ref } from 'vue'\r\nimport router from '@/router'\r\nexport default {\r\n    components: {\r\n\r\n\r\n    },\r\n    setup() {\r\n\r\n        const store = useStore();\r\n        let username = ref('');\r\n        let password = ref('');\r\n        let error_message = ref('');\r\n        const jwt_token = localStorage.getItem(\"jwt_token\");\r\n        console.log(jwt_token);\r\n        if (jwt_token) {\r\n            store.commit(\"updateToken\", jwt_token);\r\n            store.dispatch(\"getinfo\", {\r\n                success() {\r\n                    router.push({ name: \"home\" });\r\n                    store.commit(\"updatePullingInfo\", false);\r\n                },\r\n                error() {\r\n                    store.commit(\"updatePullingInfo\", false);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            store.commit(\"updatePullingInfo\", false);\r\n        }\r\n\r\n\r\n        const login = () => {\r\n            store.dispatch(\"login\", {\r\n                username: username.value,\r\n                password: password.value,\r\n                success() {\r\n                    store.dispatch(\"getinfo\", {\r\n                        success() {\r\n                            console.log(\"login sussess\");\r\n                            router.push({ name: \"home\" });//登陆成功跳转到home页面\r\n\r\n                        },\r\n                        error() {\r\n\r\n                        }\r\n\r\n                    })\r\n                },\r\n                error() {\r\n                    error_message.value = '用户名或密码错误';\r\n                },\r\n            })\r\n        }\r\n\r\n        return {\r\n            username,\r\n            password,\r\n            error_message,\r\n            login,\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.error-message {\r\n    color: red;\r\n}\r\n\r\nbody {\r\n    /* 设置背景渐变 */\r\n    background-image: linear-gradient(to left,\r\n            #9c88ff, #3cadeb);\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.a {\r\n    position: relative;\r\n    top: 100px;\r\n    left: 22%;\r\n    width: 1100px;\r\n    height: 550px;\r\n    box-shadow: 0 5px 15px rgba(0, 0, 0, .8);\r\n    display: flex;\r\n}\r\n\r\n.b {\r\n    width: 800px;\r\n    height: 550px;\r\n    background-image: url(\"@/assets/LoginBackground.jpg\");\r\n    /* 让图片适应大小 */\r\n    background-size: cover;\r\n}\r\n\r\n.c {\r\n    width: 300px;\r\n    height: 550px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.d {\r\n    width: 250px;\r\n    height: 500px;\r\n}\r\n\r\n.d h1 {\r\n    font: 900 30px '';\r\n}\r\n\r\n.e {\r\n    width: 230px;\r\n    margin: 20px 0;\r\n    outline: none;\r\n    border: 0;\r\n    padding: 10px;\r\n    border-bottom: 3px solid rgb(80, 80, 170);\r\n    font: 900 16px '';\r\n}\r\n\r\n.f {\r\n    float: right;\r\n    margin: 10px 0;\r\n}\r\n\r\n.g {\r\n    position: absolute;\r\n    margin: 20px;\r\n    bottom: 40px;\r\n    display: block;\r\n    width: 200px;\r\n    height: 60px;\r\n    font: 900 30px '';\r\n    text-decoration: none;\r\n    line-height: 50px;\r\n    border-radius: 30px;\r\n    background-image: linear-gradient(to left,\r\n            #9c88ff, #3cadeb);\r\n    text-align: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}