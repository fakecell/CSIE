{"ast":null,"code":"// import BaiduMap from 'vue-baidu-map/components/map/Map.vue'\n// import { onMounted } from 'vue'\nimport { BaiduMap } from 'vue-baidu-map-3x';\nimport { ref, nextTick } from 'vue';\nexport default {\n  components: {\n    // BaiduMap\n    BaiduMap\n  },\n\n  setup() {\n    const center = ref({\n      lng: 116.404,\n      lat: 39.915\n    });\n    const localPoint = ref({\n      lng: 0,\n      lat: 0\n    });\n    let zoom = ref(15);\n\n    const syncCenterAndZoom = e => {\n      const {\n        lng,\n        lat\n      } = e.target.getCenter();\n      zoom.value = e.target.getZoom();\n      nextTick(() => {\n        center.value.lng = lng;\n        center.value.lat = lat;\n      });\n    };\n\n    const displayLocation = position => {\n      localPoint.value.lng = position.coords.longitude, localPoint.value.lat = position.coords.latitude;\n      console.log(\"--------------------\");\n      console.log(position.coords.longitude);\n    };\n\n    const displayError = () => {};\n\n    navigator.geolocation.getCurrentPosition(displayLocation, displayError);\n    return {\n      center,\n      localPoint,\n      zoom,\n      syncCenterAndZoom\n    }; //-----------------------------------------\n    // let map = ref('');\n    // const initMap = () => {\n    //     map.value = new BMapGL.Map('map');\n    //     map.value.centercenterAndZoom(new BMapGL.Point(104.072242, 30.663711), 14);\n    // }\n    // initMap();\n    // return {\n    //     map,\n    //     initMap,\n    // }\n    // onMounted(() => {\n    // })\n    // var map = new BMap.Map('container')\n    // var point = new BMap.Point(116.404, 39.915)\n    // map.centerAndZoom(point, 15)\n    // map.enableScrollWheelZoom(true)\n  }\n\n};","map":{"version":3,"mappings":"AA2BA;AACA;AAEA,SAASA,QAAT,QAAyB,kBAAzB;AAEA,SAASC,GAAT,EAAcC,QAAd,QAA8B,KAA9B;AACA,eAAe;EAEXC,UAAU,EAAE;IACR;IACAH;EAFQ,CAFD;;EAMXI,KAAK,GAAG;IACJ,MAAMC,MAAK,GAAIJ,GAAG,CAAC;MACfK,GAAG,EAAE,OADU;MAEfC,GAAG,EAAE;IAFU,CAAD,CAAlB;IAIA,MAAMC,UAAS,GAAIP,GAAG,CAAC;MACnBK,GAAG,EAAE,CADc;MAEnBC,GAAG,EAAE;IAFc,CAAD,CAAtB;IAIA,IAAIE,IAAG,GAAIR,GAAG,CAAC,EAAD,CAAd;;IAEA,MAAMS,iBAAgB,GAAKC,CAAD,IAAO;MAC7B,MAAM;QAAEL,GAAF;QAAOC;MAAP,IAAeI,CAAC,CAACC,MAAF,CAASC,SAAT,EAArB;MACAJ,IAAI,CAACK,KAAL,GAAaH,CAAC,CAACC,MAAF,CAASG,OAAT,EAAb;MACAb,QAAQ,CAAC,MAAM;QACXG,MAAM,CAACS,KAAP,CAAaR,GAAb,GAAmBA,GAAnB;QACAD,MAAM,CAACS,KAAP,CAAaP,GAAb,GAAmBA,GAAnB;MACH,CAHO,CAAR;IAIH,CAPD;;IAQA,MAAMS,eAAc,GAAKC,QAAD,IAAc;MAClCT,UAAU,CAACM,KAAX,CAAiBR,GAAjB,GAAuBW,QAAQ,CAACC,MAAT,CAAgBC,SAAvC,EACIX,UAAU,CAACM,KAAX,CAAiBP,GAAjB,GAAuBU,QAAQ,CAACC,MAAT,CAAgBE,QAD3C;MAEAC,OAAO,CAACC,GAAR,CAAY,sBAAZ;MACAD,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACC,MAAT,CAAgBC,SAA5B;IACJ,CALA;;IAMA,MAAMI,YAAW,GAAI,MAAM,CAE3B,CAFA;;IAGAC,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCV,eAAzC,EAA0DO,YAA1D;IACA,OAAO;MACHlB,MADG;MAEHG,UAFG;MAGHC,IAHG;MAIHC;IAJG,CAAP,CA7BI,CAsCJ;IACA;IAGA;IACA;IACA;IACA;IAGA;IAEA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;EAEJ;;AApEW,CAAf","names":["BaiduMap","ref","nextTick","components","setup","center","lng","lat","localPoint","zoom","syncCenterAndZoom","e","target","getCenter","value","getZoom","displayLocation","position","coords","longitude","latitude","console","log","displayError","navigator","geolocation","getCurrentPosition"],"sourceRoot":"","sources":["D:\\MyAllCoding\\SmartCycling\\web\\src\\views\\user\\cycles\\UserCycleRunIndexView.vue"],"sourcesContent":["<!-- <template>\r\n    <input v-model=\"center.lng\">\r\n    <input v-model=\"center.lat\">\r\n    <input v-model=\"zoom\">\r\n    <baidu-map class=\"map\" :scroll-wheel-zoom=\"true\" :center=\"center\" :zoom=\"zoom\" @moving=\"syncCenterAndZoom\"\r\n        @moveend=\"syncCenterAndZoom\" @zoomend=\"syncCenterAndZoom\">\r\n    </baidu-map>    \r\n    <div id=\"container\"></div>\r\n\r\n    111\r\n</template> -->\r\n\r\n<template>\r\n    <div>\r\n        <baidu-map class=\"map\" style=\"overflow:auto\" center=\"辽宁省抚顺市\" :scroll-wheel-zoom=\"true\">\r\n            <bm-walking :start=\"localPoint\" end=\"辽宁石油化工大学体育场\" :auto-viewport=\"true\" location=\"辽宁\"></bm-walking>\r\n            <!-- { lng: 123.792825, lat: 41.861801 } -->\r\n        </baidu-map>\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\n// import BaiduMap from 'vue-baidu-map/components/map/Map.vue'\r\n// import { onMounted } from 'vue'\r\n\r\nimport { BaiduMap } from 'vue-baidu-map-3x'\r\n\r\nimport { ref, nextTick } from 'vue';\r\nexport default {\r\n\r\n    components: {\r\n        // BaiduMap\r\n        BaiduMap\r\n    },\r\n    setup() {\r\n        const center = ref({\r\n            lng: 116.404,\r\n            lat: 39.915\r\n        });\r\n        const localPoint = ref({\r\n            lng: 0,\r\n            lat: 0,\r\n        });\r\n        let zoom = ref(15);\r\n\r\n        const syncCenterAndZoom = (e) => {\r\n            const { lng, lat } = e.target.getCenter();\r\n            zoom.value = e.target.getZoom();\r\n            nextTick(() => {\r\n                center.value.lng = lng;\r\n                center.value.lat = lat;\r\n            })\r\n        };\r\n        const displayLocation = (position) => {\r\n            localPoint.value.lng = position.coords.longitude,\r\n                localPoint.value.lat = position.coords.latitude;\r\n            console.log(\"--------------------\");\r\n            console.log(position.coords.longitude);\r\n        }\r\n        const displayError = () => {\r\n\r\n        }\r\n        navigator.geolocation.getCurrentPosition(displayLocation, displayError);\r\n        return {\r\n            center,\r\n            localPoint,\r\n            zoom,\r\n            syncCenterAndZoom,\r\n        }\r\n\r\n\r\n\r\n        //-----------------------------------------\r\n        // let map = ref('');\r\n\r\n\r\n        // const initMap = () => {\r\n        //     map.value = new BMapGL.Map('map');\r\n        //     map.value.centercenterAndZoom(new BMapGL.Point(104.072242, 30.663711), 14);\r\n        // }\r\n\r\n\r\n        // initMap();\r\n\r\n        // return {\r\n        //     map,\r\n        //     initMap,\r\n        // }\r\n        // onMounted(() => {\r\n\r\n        // })\r\n        // var map = new BMap.Map('container')\r\n        // var point = new BMap.Point(116.404, 39.915)\r\n        // map.centerAndZoom(point, 15)\r\n        // map.enableScrollWheelZoom(true)\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.map {\r\n    width: 100%;\r\n    height: 1500px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}