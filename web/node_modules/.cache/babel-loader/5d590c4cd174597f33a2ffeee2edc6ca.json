{"ast":null,"code":"// import BaiduMap from 'vue-baidu-map/components/map/Map.vue'\n// import { onMounted } from 'vue'\n// import { BaiduMap } from 'vue-baidu-map-3x'\nimport { defineComponent, onMounted } from \"vue\";\nimport { ref, nextTick } from 'vue'; // export default {\n// components: {\n//     // BaiduMap\n//     // BaiduMap\n// },\n// setup() {\n//     const center = ref({\n//         lng: 116.404,\n//         lat: 39.915\n//     });\n//     let zoom = ref(15);\n//     const syncCenterAndZoom = (e) => {\n//         const { lng, lat } = e.target.getCenter();\n//         zoom.value = e.target.getZoom();\n//         nextTick(() => {\n//             center.value.lng = lng;\n//             center.value.lat = lat;\n//         })\n//     };\n//     var map = new BMap.Map(\"container\");\n//     var point = new BMap.Point(116.404, 39.915);\n//     map.centerAndZoom(point, 15);\n//     return {\n//         map,\n//         center,\n//         zoom,\n//         syncCenterAndZoom,\n//     }\n//-----------------------------------------\n// let map = ref('');\n// const initMap = () => {\n//     map.value = new BMapGL.Map('map');\n//     map.value.centercenterAndZoom(new BMapGL.Point(104.072242, 30.663711), 14);\n// }\n// initMap();\n// return {\n//     map,\n//     initMap,\n// }\n// onMounted(() => {\n// })\n// var map = new BMap.Map('container')\n// var point = new BMap.Point(116.404, 39.915)\n// map.centerAndZoom(point, 15)\n// map.enableScrollWheelZoom(true)\n// }\n// }\n\nexport default defineComponent({\n  setup() {\n    onMounted(() => {\n      loadMapScript(); // 加载百度地图资源\n    }); // 初始化地图\n\n    const init = () => {\n      let Bmap = window.BMap; // 注意要带window，不然会报错（注意官方api,会有改动，之前是Bmap,后面3.0版本改为了BMap,最好查文档或者打印一下window）\n\n      var map = new Bmap.Map(\"allmap\"); // allmap必须和dom上的id一直\n\n      map.centerAndZoom(new Bmap.Point(104.04263635868074, 30.556100647961866), 11); // 初始化地图,设置中心点坐标和地图级别\n\n      map.setCurrentCity(\"成都\");\n      map.enableScrollWheelZoom(true);\n    };\n\n    const loadMapScript = () => {\n      // 此处在所需页面引入资源就是，不用再public/index.html中引入\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.className = \"loadmap\"; // 给script一个类名\n\n      script.src = \"https://api.map.baidu.com/getscript?v=3.0&ak=2i1BaqGjolH3zHe75BHEf4VItP04tPU3\"; // 此处需要注意：申请ak时，一定要应用类别一定要选浏览器端，不能选服务端，不然地图会报ak无效\n\n      script.onload = () => {\n        // 使用script.onload，待资源加载完成，再初始化地图\n        init();\n      };\n\n      let loadmap = document.getElementsByClassName(\"loadmap\");\n\n      if (loadmap) {\n        // 每次append script之前判断一下，避免重复添加script资源标签\n        for (var i = 0; i < loadmap.length; i++) {\n          document.body.removeChild(loadmap[i]);\n        }\n      }\n\n      document.body.appendChild(script);\n    };\n  }\n\n});","map":{"version":3,"mappings":"AAiBA;AACA;AAEA;AACA,SAASA,eAAT,EAA0BC,SAA1B,QAA2C,KAA3C;AACA,SAASC,GAAT,EAAcC,QAAd,QAA8B,KAA9B,C,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAGA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAKA;;AACA,eAAeH,eAAe,CAAC;EAC3BI,KAAK,GAAG;IACJH,SAAS,CAAC,MAAM;MACZI,aAAa,GADD,CACK;IACpB,CAFQ,CAAT,CADI,CAIJ;;IACA,MAAMC,IAAG,GAAI,MAAM;MACf,IAAIC,IAAG,GAAIC,MAAM,CAACC,IAAlB,CADe,CACS;;MACxB,IAAIC,GAAE,GAAI,IAAIH,IAAI,CAACI,GAAT,CAAa,QAAb,CAAV,CAFe,CAEmB;;MAClCD,GAAG,CAACE,aAAJ,CACI,IAAIL,IAAI,CAACM,KAAT,CAAe,kBAAf,EAAmC,kBAAnC,CADJ,EAEI,EAFJ,EAHe,CAMZ;;MACHH,GAAG,CAACI,cAAJ,CAAmB,IAAnB;MACAJ,GAAG,CAACK,qBAAJ,CAA0B,IAA1B;IACH,CATD;;IAUA,MAAMV,aAAY,GAAI,MAAM;MACxB;MACA,IAAIW,MAAK,GAAIC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;MACAF,MAAM,CAACG,IAAP,GAAc,iBAAd;MACAH,MAAM,CAACI,SAAP,GAAmB,SAAnB,CAJwB,CAIM;;MAC9BJ,MAAM,CAACK,GAAP,GACI,+EADJ,CALwB,CAOxB;;MACAL,MAAM,CAACM,MAAP,GAAgB,MAAM;QAClB;QACAhB,IAAI;MACP,CAHD;;MAIA,IAAIiB,OAAM,GAAIN,QAAQ,CAACO,sBAAT,CAAgC,SAAhC,CAAd;;MACA,IAAID,OAAJ,EAAa;QACT;QACA,KAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;UACrCR,QAAQ,CAACU,IAAT,CAAcC,WAAd,CAA0BL,OAAO,CAACE,CAAD,CAAjC;QACJ;MACJ;;MAEAR,QAAQ,CAACU,IAAT,CAAcE,WAAd,CAA0Bb,MAA1B;IACH,CArBD;EAsBH;;AAtC0B,CAAD,CAA9B","names":["defineComponent","onMounted","ref","nextTick","setup","loadMapScript","init","Bmap","window","BMap","map","Map","centerAndZoom","Point","setCurrentCity","enableScrollWheelZoom","script","document","createElement","type","className","src","onload","loadmap","getElementsByClassName","i","length","body","removeChild","appendChild"],"sourceRoot":"","sources":["D:\\MyAllCoding\\SmartCycling\\web\\src\\views\\user\\cycles\\UserCycleRunIndexView.vue"],"sourcesContent":["<template>\r\n    <!-- <input v-model=\"center.lng\">\r\n    <input v-model=\"center.lat\">\r\n    <input v-model=\"zoom\"> -->\r\n    <!-- <baidu-map class=\"map\" :scroll-wheel-zoom=\"true\" :center=\"center\" :zoom=\"zoom\" @moving=\"syncCenterAndZoom\"\r\n        @moveend=\"syncCenterAndZoom\" @zoomend=\"syncCenterAndZoom\" >\r\n    </baidu-map> -->\r\n    <!-- <div id=\"container\"></div> -->\r\n    <div id=\"allmap\"></div>\r\n</template>\r\n\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\n// import BaiduMap from 'vue-baidu-map/components/map/Map.vue'\r\n// import { onMounted } from 'vue'\r\n\r\n// import { BaiduMap } from 'vue-baidu-map-3x'\r\nimport { defineComponent, onMounted } from \"vue\";\r\nimport { ref, nextTick } from 'vue';\r\n// export default {\r\n\r\n// components: {\r\n//     // BaiduMap\r\n//     // BaiduMap\r\n// },\r\n// setup() {\r\n//     const center = ref({\r\n//         lng: 116.404,\r\n//         lat: 39.915\r\n//     });\r\n\r\n//     let zoom = ref(15);\r\n\r\n//     const syncCenterAndZoom = (e) => {\r\n//         const { lng, lat } = e.target.getCenter();\r\n//         zoom.value = e.target.getZoom();\r\n//         nextTick(() => {\r\n//             center.value.lng = lng;\r\n//             center.value.lat = lat;\r\n//         })\r\n//     };\r\n//     var map = new BMap.Map(\"container\");\r\n//     var point = new BMap.Point(116.404, 39.915);\r\n//     map.centerAndZoom(point, 15);\r\n//     return {\r\n//         map,\r\n//         center,\r\n//         zoom,\r\n//         syncCenterAndZoom,\r\n//     }\r\n\r\n\r\n\r\n//-----------------------------------------\r\n// let map = ref('');\r\n\r\n\r\n// const initMap = () => {\r\n//     map.value = new BMapGL.Map('map');\r\n//     map.value.centercenterAndZoom(new BMapGL.Point(104.072242, 30.663711), 14);\r\n// }\r\n\r\n\r\n// initMap();\r\n\r\n// return {\r\n//     map,\r\n//     initMap,\r\n// }\r\n// onMounted(() => {\r\n\r\n// })\r\n// var map = new BMap.Map('container')\r\n// var point = new BMap.Point(116.404, 39.915)\r\n// map.centerAndZoom(point, 15)\r\n// map.enableScrollWheelZoom(true)\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n// }\r\nexport default defineComponent({\r\n    setup() {\r\n        onMounted(() => {\r\n            loadMapScript(); // 加载百度地图资源\r\n        });\r\n        // 初始化地图\r\n        const init = () => {\r\n            let Bmap = window.BMap; // 注意要带window，不然会报错（注意官方api,会有改动，之前是Bmap,后面3.0版本改为了BMap,最好查文档或者打印一下window）\r\n            var map = new Bmap.Map(\"allmap\"); // allmap必须和dom上的id一直\r\n            map.centerAndZoom(\r\n                new Bmap.Point(104.04263635868074, 30.556100647961866),\r\n                11\r\n            ); // 初始化地图,设置中心点坐标和地图级别\r\n            map.setCurrentCity(\"成都\");\r\n            map.enableScrollWheelZoom(true);\r\n        };\r\n        const loadMapScript = () => {\r\n            // 此处在所需页面引入资源就是，不用再public/index.html中引入\r\n            var script = document.createElement(\"script\");\r\n            script.type = \"text/javascript\";\r\n            script.className = \"loadmap\"; // 给script一个类名\r\n            script.src =\r\n                \"https://api.map.baidu.com/getscript?v=3.0&ak=2i1BaqGjolH3zHe75BHEf4VItP04tPU3\";\r\n            // 此处需要注意：申请ak时，一定要应用类别一定要选浏览器端，不能选服务端，不然地图会报ak无效\r\n            script.onload = () => {\r\n                // 使用script.onload，待资源加载完成，再初始化地图\r\n                init();\r\n            };\r\n            let loadmap = document.getElementsByClassName(\"loadmap\");\r\n            if (loadmap) {\r\n                // 每次append script之前判断一下，避免重复添加script资源标签\r\n                for (var i = 0; i < loadmap.length; i++) {\r\n                    document.body.removeChild(loadmap[i]);\r\n                }\r\n            }\r\n\r\n            document.body.appendChild(script);\r\n        };\r\n    },\r\n});\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.map {\r\n    width: 100%;\r\n    height: 500px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}