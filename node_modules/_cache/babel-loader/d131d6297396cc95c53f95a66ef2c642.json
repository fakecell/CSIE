{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n}, [/*#__PURE__*/_createCommentVNode(\" <div class=\\\"col-3\\\">\\r\\n                <div class=\\\"card\\\">\\r\\n                    <div class=\\\"card-body\\\">\\r\\n                        <img :src=\\\"$store.state.user.photo\\\" alt=\\\"\\\" style=\\\"width:100%\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div> \"), /*#__PURE__*/_createCommentVNode(\" <div class=\\\"col-9\\\">\\r\\n\\r\\n                <div class=\\\"card\\\">\\r\\n                    <div class=\\\"card-header\\\">\\r\\n                        我的车辆\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-primary float-end\\\" data-bs-toggle=\\\"modal\\\"\\r\\n                            data-bs-target=\\\"#add-cycle-btn\\\">添加车辆</button>\\r\\n\\r\\n\\r\\n                        <div class=\\\"card-body\\\">\\r\\n                            <table class=\\\"table table-striped table-hover\\\">\\r\\n                                <thead>\\r\\n                                    <tr>\\r\\n                                        <th>名称</th>\\r\\n                                        <th>类型</th>\\r\\n                                        <th>骑行状态</th>\\r\\n                                        <th>其他</th>\\r\\n                                        <th>操作</th>\\r\\n                                    </tr>\\r\\n                                </thead>\\r\\n                                <tbody>\\r\\n                                    <tr v-for=\\\"cycle in cycles\\\" :key=\\\"cycle.id\\\">\\r\\n                                        <td>{{ cycle.cname }}</td>\\r\\n                                        <td>{{ cycle.ctype }}</td>\\r\\n                                        <td>{{ cycle.cstate }}</td>\\r\\n                                        <td></td>\\r\\n                                        <td>\\r\\n                                            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" data-bs-toggle=\\\"modal\\\"\\r\\n                                                :data-bs-target=\\\"'#update-cycle-btn-' + cycle.id\\\"\\r\\n                                                style=\\\"margin-right:10px;\\\">修改</button>\\r\\n                                            <button type=\\\"button\\\" class=\\\"btn btn-danger\\\"\\r\\n                                                @click=\\\"remove_cycle(bot)\\\">删除</button>\\r\\n                                        </td>\\r\\n\\r\\n                                    </tr>\\r\\n                                </tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                    </div>\\r\\n\\r\\n                </div>\\r\\n\\r\\n\\r\\n            </div> \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = [_hoisted_2];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, _hoisted_3);\n}","map":{"version":3,"mappings":";;EAESA,KAAK,EAAC;EAAYC,KAAwB,EAAxB;IAAA;EAAA;;;gCACnBC,oBAoDM,KApDN,EAoDM;EApDDF,KAAK,EAAC,KAoDL;EApDWC,KAAwB,EAAxB;IAAA;EAAA;AAoDX,CApDN,gBACIE,oUAOAA,wqEARJ;;AAAA;;oBAAAC;;uBADJC,oBAsDM,KAtDN,cAsDMC,UAtDN","names":["class","style","_createElementVNode","_createCommentVNode","_hoisted_2","_createElementBlock","_hoisted_3"],"sourceRoot":"","sources":["D:\\MyAllCoding\\SmartCycling\\web\\src\\views\\user\\cycles\\UserCycleIndexView.vue"],"sourcesContent":["<template>\r\n\r\n    <div class=\"container\" style=\"margin-top:20px;\">\r\n        <div class=\"row\" style=\"margin-top:20px;\">\r\n            <!-- <div class=\"col-3\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <img :src=\"$store.state.user.photo\" alt=\"\" style=\"width:100%\">\r\n                    </div>\r\n                </div>\r\n            </div> -->\r\n            <!-- <div class=\"col-9\">\r\n\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        我的车辆\r\n                        <button type=\"button\" class=\"btn btn-primary float-end\" data-bs-toggle=\"modal\"\r\n                            data-bs-target=\"#add-cycle-btn\">添加车辆</button>\r\n\r\n\r\n                        <div class=\"card-body\">\r\n                            <table class=\"table table-striped table-hover\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>名称</th>\r\n                                        <th>类型</th>\r\n                                        <th>骑行状态</th>\r\n                                        <th>其他</th>\r\n                                        <th>操作</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"cycle in cycles\" :key=\"cycle.id\">\r\n                                        <td>{{ cycle.cname }}</td>\r\n                                        <td>{{ cycle.ctype }}</td>\r\n                                        <td>{{ cycle.cstate }}</td>\r\n                                        <td></td>\r\n                                        <td>\r\n                                            <button type=\"button\" class=\"btn btn-secondary\" data-bs-toggle=\"modal\"\r\n                                                :data-bs-target=\"'#update-cycle-btn-' + cycle.id\"\r\n                                                style=\"margin-right:10px;\">修改</button>\r\n                                            <button type=\"button\" class=\"btn btn-danger\"\r\n                                                @click=\"remove_cycle(bot)\">删除</button>\r\n                                        </td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div> -->\r\n        </div>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport $ from 'jquery'\r\nimport { useStore } from 'vuex'\r\nimport { ref, reactive } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\nexport default {\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        let cycles = ref([]);\r\n        const store = useStore();\r\n        const cycleAdd = reactive({\r\n            cname: \"\",\r\n            ctype: \"\",\r\n            error_message: \"\",\r\n        })\r\n        const refresh_cycles = () => {\r\n            $.ajax({\r\n                url: \"http://localhost:3000/user/cycle/getList/\",\r\n                type: \"get\",\r\n                headers: {\r\n                    Authorization: \"Bearer \" + store.state.user.token,\r\n                },\r\n                success(resp) {\r\n                    cycles.value = resp;\r\n                }\r\n            });\r\n        }\r\n\r\n        const add_cycle = () => {\r\n            cycleAdd.error_message = \"\";\r\n            $.ajax({\r\n                url: \"http://localhost:3000/user/cycle/add/\",\r\n                type: \"post\",\r\n                headers: {\r\n                    Authorization: \"Bearer \" + store.state.user.token,\r\n                },\r\n                data: {\r\n                    cname: cycleAdd.cname,\r\n                    ctype: cycleAdd.ctype,\r\n                },\r\n                success(resp) {\r\n                    if (resp.error_message === \"success\") {\r\n                        cycleAdd.cname = \"\",\r\n                            cycleAdd.ctype = \"\",\r\n                            Modal.getInstance(\"#add-cycle-btn\").hide();\r\n                        refresh_cycles();\r\n                    }\r\n                    else cycleAdd.error_message = resp.error_message;\r\n                }\r\n            });\r\n        }\r\n\r\n        const remove_cycle = (cycle) => {\r\n            $.ajax({\r\n                url: \"http://localhost:3000/user/cycle/remove/\",\r\n                type: \"post\",\r\n                data: {\r\n                    cycle_id: cycle.id,\r\n                },\r\n                headers: {\r\n                    Authorization: \"Bearer \" + store.state.user.token,\r\n                },\r\n                success(resp) {\r\n                    if (resp.error_message === \"success\") {\r\n                        refresh_cycles();\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        const update_cycle = (cycle) => {\r\n            $.ajax({\r\n                url: \"http://localhost:3000/user/cycle/update/\",\r\n                type: \"post\",\r\n                data: {\r\n                    cycle_id: cycle.id,\r\n                    cname: cycle.cname,\r\n                    cstate: cycle.cstate,\r\n                },\r\n                headers: {\r\n                    Authorization: \"Bearer \" + store.state.user.token,\r\n                },\r\n                success(resp) {\r\n                    if (resp.error_message === \"success\") {\r\n                        Modal.getInstance('#update-cycle-btn-' + cycle.id).hide();\r\n                        refresh_cycles();\r\n                    }\r\n                    else cycle.error_message = resp.error_message;\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n        return {\r\n            cycles,\r\n            cycleAdd,\r\n            add_cycle,\r\n            remove_cycle,\r\n            update_cycle,\r\n        }\r\n\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}