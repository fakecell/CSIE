{"ast":null,"code":"import $ from 'jquery';\nimport { useStore } from 'vuex';\nimport { ref, reactive } from 'vue';\nimport { Modal } from 'bootstrap';\nexport default {\n  components: {},\n\n  setup() {\n    let cycles = ref([]);\n    const store = useStore();\n    const cycleAdd = reactive({\n      cname: \"\",\n      ctype: \"\",\n      error_message: \"\"\n    });\n\n    const refresh_cycles = () => {\n      $.ajax({\n        url: \"http://localhost:3000/user/cycle/getList/\",\n        type: \"get\",\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n\n        success(resp) {\n          cycles.value = resp;\n        }\n\n      });\n    }; // const add_cycle = () => {\n    //     cycleAdd.error_message = \"\";\n    //     $.ajax({\n    //         url: \"http://localhost:3000/user/cycle/add/\",\n    //         type: \"post\",\n    //         headers: {\n    //             Authorization: \"Bearer \" + store.state.user.token,\n    //         },\n    //         data: {\n    //             cname: cycleAdd.cname,\n    //             ctype: cycleAdd.ctype,\n    //         },\n    //         success(resp) {\n    //             if (resp.error_message === \"success\") {\n    //                 cycleAdd.cname = \"\",\n    //                     cycleAdd.ctype = \"\",\n    //                     Modal.getInstance(\"#add-cycle-btn\").hide();\n    //                 refresh_cycles();\n    //             }\n    //             else cycleAdd.error_message = resp.error_message;\n    //         }\n    //     });\n    // }\n    // const remove_cycle = (cycle) => {\n    //     $.ajax({\n    //         url: \"http://localhost:3000/user/cycle/remove/\",\n    //         type: \"post\",\n    //         data: {\n    //             cycle_id: cycle.id,\n    //         },\n    //         headers: {\n    //             Authorization: \"Bearer \" + store.state.user.token,\n    //         },\n    //         success(resp) {\n    //             if (resp.error_message === \"success\") {\n    //                 refresh_cycles();\n    //             }\n    //         }\n    //     });\n    // }\n    // const update_cycle = (cycle) => {\n    //     $.ajax({\n    //         url: \"http://localhost:3000/user/cycle/update/\",\n    //         type: \"post\",\n    //         data: {\n    //             cycle_id: cycle.id,\n    //             cname: cycle.cname,\n    //             cstate: cycle.cstate,\n    //         },\n    //         headers: {\n    //             Authorization: \"Bearer \" + store.state.user.token,\n    //         },\n    //         success(resp) {\n    //             if (resp.error_message === \"success\") {\n    //                 Modal.getInstance('#update-cycle-btn-' + cycle.id).hide();\n    //                 refresh_cycles();\n    //             }\n    //             else cycle.error_message = resp.error_message;\n    //         }\n    //     });\n    // }\n\n\n    return {\n      cycles,\n      cycleAdd // add_cycle,\n      // remove_cycle,\n      // update_cycle,\n\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA+DA,OAAOA,CAAP,MAAc,QAAd;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,GAAT,EAAcC,QAAd,QAA8B,KAA9B;AACA,SAASC,KAAT,QAAsB,WAAtB;AACA,eAAe;EACXC,UAAU,EAAE,EADD;;EAIXC,KAAK,GAAG;IACJ,IAAIC,MAAK,GAAIL,GAAG,CAAC,EAAD,CAAhB;IACA,MAAMM,KAAI,GAAIP,QAAQ,EAAtB;IACA,MAAMQ,QAAO,GAAIN,QAAQ,CAAC;MACtBO,KAAK,EAAE,EADe;MAEtBC,KAAK,EAAE,EAFe;MAGtBC,aAAa,EAAE;IAHO,CAAD,CAAzB;;IAKA,MAAMC,cAAa,GAAI,MAAM;MACzBb,CAAC,CAACc,IAAF,CAAO;QACHC,GAAG,EAAE,2CADF;QAEHC,IAAI,EAAE,KAFH;QAGHC,OAAO,EAAE;UACLC,aAAa,EAAE,YAAYV,KAAK,CAACW,KAAN,CAAYC,IAAZ,CAAiBC;QADvC,CAHN;;QAMHC,OAAO,CAACC,IAAD,EAAO;UACVhB,MAAM,CAACiB,KAAP,GAAeD,IAAf;QACJ;;MARG,CAAP;IAUJ,CAXA,CARI,CAqBJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;;;IAIA,OAAO;MACHhB,MADG;MAEHE,QAFG,CAGH;MACA;MACA;;IALG,CAAP;EAQJ;;AArGW,CAAf","names":["$","useStore","ref","reactive","Modal","components","setup","cycles","store","cycleAdd","cname","ctype","error_message","refresh_cycles","ajax","url","type","headers","Authorization","state","user","token","success","resp","value"],"sourceRoot":"","sources":["D:\\MyAllCoding\\SmartCycling\\web\\src\\views\\user\\cycles\\UserCycleIndexView.vue"],"sourcesContent":["<template>\r\n\r\n    <div class=\"container\" style=\"margin-top:20px;\">\r\n        <div class=\"row\" style=\"margin-top:20px;\">\r\n            <div class=\"col-3\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                        <img :src=\"$store.state.user.photo\" alt=\"\" style=\"width:100%\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-9\">\r\n\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        我的车辆\r\n                        <button type=\"button\" class=\"btn btn-primary float-end\" data-bs-toggle=\"modal\"\r\n                            data-bs-target=\"#add-cycle-btn\">添加车辆</button>\r\n\r\n\r\n                        <div class=\"card-body\">\r\n                            <table class=\"table table-striped table-hover\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>名称</th>\r\n                                        <th>类型</th>\r\n                                        <th>骑行状态</th>\r\n                                        <th>其他</th>\r\n                                        <th>操作</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"cycle in cycles\" :key=\"cycle.id\">\r\n                                        <td>{{ cycle.cname }}</td>\r\n                                        <td>{{ cycle.ctype }}</td>\r\n                                        <td>{{ cycle.cstate }}</td>\r\n                                        <td></td>\r\n                                        <td>\r\n                                            <button type=\"button\" class=\"btn btn-secondary\" data-bs-toggle=\"modal\"\r\n                                                :data-bs-target=\"'#update-cycle-btn-' + cycle.id\"\r\n                                                style=\"margin-right:10px;\">修改</button>\r\n                                            <button type=\"button\" class=\"btn btn-danger\"\r\n                                                @click=\"remove_cycle(bot)\">删除</button>\r\n                                        </td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport $ from 'jquery'\r\nimport { useStore } from 'vuex'\r\nimport { ref, reactive } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\nexport default {\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        let cycles = ref([]);\r\n        const store = useStore();\r\n        const cycleAdd = reactive({\r\n            cname: \"\",\r\n            ctype: \"\",\r\n            error_message: \"\",\r\n        })\r\n        const refresh_cycles = () => {\r\n            $.ajax({\r\n                url: \"http://localhost:3000/user/cycle/getList/\",\r\n                type: \"get\",\r\n                headers: {\r\n                    Authorization: \"Bearer \" + store.state.user.token,\r\n                },\r\n                success(resp) {\r\n                    cycles.value = resp;\r\n                }\r\n            });\r\n        }\r\n\r\n        // const add_cycle = () => {\r\n        //     cycleAdd.error_message = \"\";\r\n        //     $.ajax({\r\n        //         url: \"http://localhost:3000/user/cycle/add/\",\r\n        //         type: \"post\",\r\n        //         headers: {\r\n        //             Authorization: \"Bearer \" + store.state.user.token,\r\n        //         },\r\n        //         data: {\r\n        //             cname: cycleAdd.cname,\r\n        //             ctype: cycleAdd.ctype,\r\n        //         },\r\n        //         success(resp) {\r\n        //             if (resp.error_message === \"success\") {\r\n        //                 cycleAdd.cname = \"\",\r\n        //                     cycleAdd.ctype = \"\",\r\n        //                     Modal.getInstance(\"#add-cycle-btn\").hide();\r\n        //                 refresh_cycles();\r\n        //             }\r\n        //             else cycleAdd.error_message = resp.error_message;\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        // const remove_cycle = (cycle) => {\r\n        //     $.ajax({\r\n        //         url: \"http://localhost:3000/user/cycle/remove/\",\r\n        //         type: \"post\",\r\n        //         data: {\r\n        //             cycle_id: cycle.id,\r\n        //         },\r\n        //         headers: {\r\n        //             Authorization: \"Bearer \" + store.state.user.token,\r\n        //         },\r\n        //         success(resp) {\r\n        //             if (resp.error_message === \"success\") {\r\n        //                 refresh_cycles();\r\n        //             }\r\n        //         }\r\n\r\n        //     });\r\n        // }\r\n\r\n        // const update_cycle = (cycle) => {\r\n        //     $.ajax({\r\n        //         url: \"http://localhost:3000/user/cycle/update/\",\r\n        //         type: \"post\",\r\n        //         data: {\r\n        //             cycle_id: cycle.id,\r\n        //             cname: cycle.cname,\r\n        //             cstate: cycle.cstate,\r\n        //         },\r\n        //         headers: {\r\n        //             Authorization: \"Bearer \" + store.state.user.token,\r\n        //         },\r\n        //         success(resp) {\r\n        //             if (resp.error_message === \"success\") {\r\n        //                 Modal.getInstance('#update-cycle-btn-' + cycle.id).hide();\r\n        //                 refresh_cycles();\r\n        //             }\r\n        //             else cycle.error_message = resp.error_message;\r\n\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n\r\n\r\n        return {\r\n            cycles,\r\n            cycleAdd,\r\n            // add_cycle,\r\n            // remove_cycle,\r\n            // update_cycle,\r\n        }\r\n\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}